<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Start service upon rebooting ubuntu | 0xBF</title>
<meta name="description" content="">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="https://bofeng.github.io/favicon.ico?v=1587246450810">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/papercss@1.6.1/dist/paper.min.css" />
<link rel="stylesheet" href="https://bofeng.github.io/styles/main.css">


<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />


  </head>
  <body>
  
    <nav class="navbar border fixed split-nav">
  <div class="nav-brand">
    <h3><a href="https://bofeng.github.io">0xBF</a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
      <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
        
          <li>
            
              <a href="/" class="menu">
                é¦–é¡µ
              </a>
            
          </li>
        
          <li>
            
              <a href="/archives" class="menu">
                å½’æ¡£
              </a>
            
          </li>
        
          <li>
            
              <a href="/tags" class="menu">
                æ ‡ç­¾
              </a>
            
          </li>
        
          <li>
            
              <a href="/post/open-source-license-flow-chart/" class="menu">
                Open Source License
              </a>
            
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div id="top" class="row site">
      <div class="sm-12 md-8 col">
        <div class="paper">
          <article class="article">
            <h1>Start service upon rebooting ubuntu</h1>
            <p class="article-meta">
              2015-12-12
              
                <a href="https://bofeng.github.io/tag/Jo5ZHkrbX/" class="badge secondary">
                  ubuntu
                </a>
              
            </p>
            
            <div class="post-content">
              <p>å› ä¸ºLinodeæœ€è¿‘é‡å¯çš„æœ‰ç‚¹é¢‘ç¹ï¼Œæ‰€ä»¥å½“é‡å¯å®Œæˆåï¼Œéœ€è¦auto startä¸€äº›serviceã€‚ä¹‹å‰ä¸€ç›´æ²¡å»äº†è§£è¿‡<code>/etc/</code>ä¸‹é¢é‚£ä¸€å¨<code>rc.d</code>æ˜¯æ€ä¹ˆå›äº‹ï¼Œè¿™æ¬¡æŸ¥äº†ä¸‹ï¼Œç•™ä½œè®°å½•ï¼ˆæ“ä½œç¯å¢ƒæ˜¯Ubuntu 14.04 LTSï¼‰ã€‚</p>
<!-- more -->
<h3 id="1-runlevelç®€ä»‹">1. runlevelç®€ä»‹</h3>
<p>è¿è¡Œ<code>ls /etc | grep ^rc</code>ï¼Œä¼šå‡ºç°å‡ ä¸ªrcX.dçš„æ–‡ä»¶ï¼šrc0.d, rc1.d, ... rc6.d, rc.local, rcS.dï¼Œå…¶ä¸­rc0~6.d, rcS.déƒ½æ˜¯æ–‡ä»¶å¤¹ï¼Œ<br>
è¿™äº›æ•°å­—ä»£è¡¨äº†runlevelã€‚</p>
<p>å¯ä»¥æŠŠrunlevelç›®å‰åªå½“æˆä¸ªç¯å¢ƒå˜é‡è€Œå·²ï¼Œç³»ç»Ÿå¯åŠ¨æ—¶ä¼šè®¾ç½®è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œå½“ç³»ç»Ÿåœ¨ä¸åŒçš„runlevelæ—¶ï¼Œå°±ä¼šè¯»å–ç›¸åº”çš„rcX.dä¸‹çš„è„šæœ¬ã€‚<br>
æ¯”å¦‚å¦‚æœåœ¨level 3ï¼Œé‚£ä¹ˆå°±ä¼šè¯»å–<code>/etc/rc3.d</code>ä¸‹çš„scriptã€‚</p>
<p>æœ‰8ä¸ªrunlevels, ä»0åˆ°6æœ‰7ä¸ªï¼ŒåŠ ä¸Šä»¥Så‘½åçš„é‚£ä¸ªrcS.dï¼Œä¸€å…±æœ‰8ä¸ªã€‚è¿™å…¶ä¸­0ï¼Œ1 å’Œ 6 are reservedï¼ŒRunlevel 0<br>
is used to halt the system and 6 to reboot the system. Runlevel 1 is  used  to  bring<br>
the system  back  down into single-user mode, after which the runlevel will be S (single-user mode).</p>
<p>ä¹ä¸€çœ‹æ¥ï¼Œç³»ç»Ÿå¯åŠ¨æ—¶å¥½åƒæ˜¯ä»rc0.dä¸‹çš„è„šæœ¬é¡ºåºæ‰§è¡Œåˆ°rc6.dä¸‹çš„è„šæœ¬ï¼Œä½†å®é™…å¹¶ä¸æ˜¯è¿™æ ·ï¼Œä¸Šé¢å·²ç»è§£é‡Šäº†ï¼Œè¿™åªæ˜¯ç³»ç»Ÿåœ¨ä¸åŒlevelæˆ–è€…ä¸åŒstatusæ—¶ï¼Œä¼šå»æ‰¾å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹çš„è„šæœ¬å»æ‰§è¡Œã€‚</p>
<h3 id="2-åˆ‡æ¢runlevel">2. åˆ‡æ¢runlevel</h3>
<p>å½“ç³»ç»Ÿåˆ‡æ¢runlevelæ—¶ï¼Œå¦‚æœåœ¨å½“å‰levelçš„ä¸€äº›serviceåœ¨æ–°çš„runlevelä¸å­˜åœ¨ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªæ–°çš„runlevelä¸‹ï¼Œè¿™ä¸ªserviceéœ€è¦åœæ­¢ï¼Œåªå¯åŠ¨åœ¨æ–°levelä¸‹çš„serviceã€‚</p>
<p>å¦‚æœæŸ¥çœ‹å…¶ä¸­ä¸€ä¸ªrcX.dæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ï¼Œä¼šçœ‹åˆ°å¾ˆå¤šä»¥Kæˆ–è€…Så¼€å¤´çš„è„šæœ¬ï¼š</p>
<pre><code class="language-bash">$ ls /etc/rc1.d
K09apache2   K20exim4      K20redis_6379     K77ntp  S30killprocs  S70pppd-dns
K19sendmail  K20memcached  K20ssh-host-keys  README  S70dns-clean  S90single
</code></pre>
<p>è¿™äº›åœ¨åˆ‡æ¢levelæ—¶ä¼šè¢«ç”¨åˆ°ï¼Œä»¥Kå¼€å¤´çš„serviceä¼šè¢«åœæ­¢ï¼Œä»¥Så¼€å¤´çš„serviceä¼šè¢«å¯åŠ¨ã€‚è€Œè¿™ä¸ªè¿‡ç¨‹æ˜¯<br>
é€šè¿‡è„šæœ¬<code>/etc/init.d/rc</code>æ¥å®Œæˆçš„ï¼ŒæŸ¥çœ‹è¿™ä¸ªè„šæœ¬å†…å®¹ï¼š</p>
<pre><code class="language-bash">CURLEVEL=&quot;&quot;
for s in /etc/rc$runlevel.d/K*
do  
    # Extract order value from symlink
    level=${s#/etc/rc$runlevel.d/K}
    ...
    startup stop $SCRIPTS
done
...
CURLEVEL=$level
for s in /etc/rc$runlevel.d/S*
    ...
    startup $ACTION $SCRIPTS # Simply treat ACTION as start
done
...
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªè„šæœ¬ä¼šè¯»å–ä»¥Kå¼€å¤´çš„æœåŠ¡ï¼Œå¹¶è°ƒç”¨<code>startup stop</code>å»åœæ­¢å®ƒï¼Œè€Œä»¥Så¼€å¤´çš„æœåŠ¡ï¼Œä¼š<br>
è°ƒç”¨<code>startup start</code>å»å¯åŠ¨å®ƒã€‚</p>
<h3 id="3-å¯åŠ¨é¡ºåº">3. å¯åŠ¨é¡ºåº</h3>
<p>å½“ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œä¼šæ‰§è¡Œ<code>/etc/init/rc-sysinit.conf</code>ï¼Œè¿™ä¸ªè„šæœ¬ä¼šè°ƒç”¨<code>/etc/init.d/rc</code>å¹¶ä»¥runlevel=Såšä¸ºå‚æ•°ï¼Œè®©ç³»ç»Ÿè¿æ–°rcS.dä¸‹çš„æœåŠ¡ï¼Œå½“å®Œæˆåï¼Œä¼šè°ƒç”¨<code>telinit</code>å‘½ä»¤æ¥è·³å›ç³»ç»Ÿçš„default runlevel. ç³»ç»Ÿçš„default runlevelä¹Ÿæ˜¯åœ¨<code>/etc/init/rc-sysinit.conf</code>è®¾ç½®çš„ï¼š</p>
<pre><code class="language-bash">env DEFAULT_RUNLEVEL=2
</code></pre>
<p>å¯ä»¥çœ‹åˆ°é»˜è®¤çš„runlevelæ˜¯2ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç³»ç»Ÿå‘½ä»¤<code>runlevel</code>æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„runlevelï¼š</p>
<pre><code class="language-bash">$ runlevel
N 2
</code></pre>
<p>é™„å…³äºtelinit:</p>
<p>The primary command used to change run levels is <code>telinit</code>. Get it? &quot;Tell Init&quot; to do something, like this:</p>
<pre><code class="language-bash">telinit 2
</code></pre>
<p><code>telinit</code> takes one argument on the command line. As always, see the man page for full details. Normally the argument will be one of: 0,1,2,3,4,5,6, or the letter 'S'. As you may have guessed, the numbers correspond to the run level you wish to move to. Using the 'S', for single-user, is the same as the number 1, but don't do it; the 'S' runlevel is intended for use by the UserLinux (Debian)system.</p>
<p>A note of caution is warranted here. You can easily use the <code>telinit</code> command to reboot (run level 6), or shutdown (run level 0) the system, but it is not recommended. Certain programs need special processing for an orderly shutdown. Bypassing the expected shutdown sequence can have dire effects on your data. Older <em>Unix</em> systems are especially sensitive to shutdown/bootup operations.</p>
<h3 id="4-whats-rclocal">4. What's rc.local</h3>
<p>The script /etc/rc.local is for use by the system administrator. <strong>It is executed after all the normal system services are started, at the end of the process of switching to a multiuser runlevel.</strong> You might use it to start a custom service, for example a server that's installed in /usr/local. Most installations don't need /etc/rc.local, it's provided for the minority of cases where it's needed.</p>
<p>åœ¨Ubuntuç³»ç»Ÿé‡Œæœ‰ä¸¤ä¸ªrc.localï¼Œä¸€ä¸ªä½äº <code>/etc/rc.local</code>ï¼Œå¦ä¸€ä¸ªåœ¨<code>/etc/init.d/rc.local</code>ï¼Œæœ‰ä¸¤ä¸ªå­˜åœ¨æ˜¯ç”±äºå†å²åŸå› ï¼Œ<br>
ä¸ºäº†å‘å‰å…¼å®¹ã€‚å¦‚æœæ‰“å¼€<code>/etc/init.d/rc.local</code>ï¼Œå¯ä»¥çœ‹åˆ°æ³¨é‡Šï¼š</p>
<pre><code class="language-bash"># Short-Description: Run /etc/rc.local if it exist
</code></pre>
<p>å¯è§<code>/etc/init.d/rc.local</code>åªæ˜¯ä¸ºäº†è¿è¡Œ<code>/etc/rc.local</code>é‡Œçš„ä»£ç ï¼Œè€Œé»˜è®¤çš„<code>/etc/rc.local</code>é‡Œåªæœ‰ä¸€è¡Œexit 0ã€‚<br>
å¦‚æœæƒ³è¦åŠ ä¸€äº›éå¸¸ç®€å•çš„å¯åŠ¨æœåŠ¡å¯åŠ¨è¿è¡Œè„šæœ¬ï¼Œå¯ä»¥ç›´æ¥ç¼–è¾‘<code>/etc/rc.local</code>ã€‚</p>
<h3 id="5-å¢åŠ æœåŠ¡å¯åŠ¨è„šæœ¬">5. å¢åŠ æœåŠ¡å¯åŠ¨è„šæœ¬</h3>
<p>åšäº†å‰é¢çš„å‡†å¤‡å·¥ä½œï¼Œç»ˆäºè¦åˆ‡å…¥æ­£é¢˜äº†ï¼šå¢åŠ ä¸€ä¸ªè‡ªå·±çš„æœåŠ¡å¯åŠ¨è„šæœ¬</p>
<p><strong>æ–¹æ³•ä¸€ï¼šrc.local</strong></p>
<p>å¦‚æœä½ çš„å¯åŠ¨æœåŠ¡è„šæœ¬å¾ˆç®€å•ï¼Œæ ¹æ®ä¸Šé¢å¯¹rc.localçš„è§£é‡Šï¼Œåªéœ€è¦æŠŠå®ƒæ”¾è¿›<code>/etc/rc.local</code>å³å¯ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰æ›´æ”¹è¿‡<code>rc.local</code>ï¼Œé‚£ä¹ˆå®ƒåªæœ‰ä¸€è¡Œ<code>exit 0</code>ï¼Œæˆ‘ä»¬è‡ªå·±åŠ ä¸€è¡Œï¼š</p>
<pre><code class="language-bash">echo &quot;hello `whoami`, `date`&quot; &gt;&gt; ~/teststart
exit 0
</code></pre>
<p>ä¿å­˜æ–‡ä»¶é€€å‡ºï¼Œä¸‹æ¬¡ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨teststarté‡Œå°±å¯ä»¥çœ‹åˆ°è¾“å‡ºäº†ã€‚</p>
<p><strong>ç”±äºrc.localä¼šåœ¨rcX.dé‡Œå…¶å®ƒæœåŠ¡æ‰§è¡Œåæ‰§è¡Œ</strong>ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯åŠ¨ä¸€äº›ä»¥èµ–äºå…¶å®ƒæœåŠ¡å…ˆå¯åŠ¨çš„è„šæœ¬ï¼Œ<br>
å‡è®¾æˆ‘ä»¬çš„è„šæœ¬æ˜¯ç»Ÿè®¡apache2å¯åŠ¨åå¯åŠ¨äº†å¤šå°‘è¿›ç¨‹ï¼Œé‚£ä¹ˆç›´æ¥ç”¨ï¼š</p>
<pre><code class="language-bash">echo &quot;[rc.local] `ps axu | grep apache | grep -v 'grep' | wc -l` apache process started @ `date`&quot; &gt; /tmp/teststart
exit 0
</code></pre>
<p>é‡å¯æœºå™¨å‘ç°/tmp/teststarté‡Œçš„å†…å®¹ï¼š</p>
<pre><code class="language-bash">$ cat /tmp/teststart
[rc.local] 20 apache process started @ Mon Dec 14 16:24:54 EST 2015
</code></pre>
<p>èƒ½æ­£ç¡®ç»Ÿè®¡å°±æ˜¯å› ä¸ºåŒåœ¨rc2.dä¸‹çš„apacheä¼šå…ˆäºrc.localå¯åŠ¨æ‰§è¡Œã€‚</p>
<p><strong>æ–¹æ³•äºŒï¼šupdate-rc.d</strong></p>
<p>ç¬¬äºŒç§æ–¹æ³•å°±æ˜¯æŠŠå¯åŠ¨è„šæœ¬è®¾ç½®åˆ°rcX.dï¼Œé¦–å…ˆåœ¨<code>/etc/init.d/</code>ä¸‹å†™å¥½è„šæœ¬ï¼Œä¾‹å¦‚ <code>hello_service</code>ï¼š</p>
<pre><code class="language-bash">#!/usr/bin/env bash
echo &quot;hello from rc.d, `whoami`, `date`&quot; &gt;&gt; ~/teststart
</code></pre>
<p>è®¾ç½®è„šæœ¬å¯æ‰§è¡Œï¼Œç„¶åä½¿ç”¨<code>update-rc.d</code>è®²å®ƒè®¾ç½®è¿›rcX.dçš„ç›®å½•ï¼š</p>
<pre><code class="language-bash">$ sudo chmod +x hello_service
$ sudo update-rc.d hello_service defaults
Adding system startup for /etc/init.d/hello_service ...
   /etc/rc0.d/K20hello_service -&gt; ../init.d/hello_service
   /etc/rc1.d/K20hello_service -&gt; ../init.d/hello_service
   /etc/rc6.d/K20hello_service -&gt; ../init.d/hello_service
   /etc/rc2.d/S20hello_service -&gt; ../init.d/hello_service
   /etc/rc3.d/S20hello_service -&gt; ../init.d/hello_service
   /etc/rc4.d/S20hello_service -&gt; ../init.d/hello_service
   /etc/rc5.d/S20hello_service -&gt; ../init.d/hello_service
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™æ¡å‘½ä»¤ç»™å¯¹åº”çš„rc0,1,6.dçš„ç›®å½•ä¸‹æ·»åŠ äº†Kå¼€å¤´çš„è„šæœ¬è½¯é“¾æ¥ï¼Œä¸Šé¢æåˆ°äº†ä»¥Kå¼€å¤´çš„ä»£è¡¨Stopï¼Œä¹Ÿå°±æ˜¯å½“runlevelè¿›å…¥0,1,6æ—¶ï¼Œä¼šstopè¿™ä¸ªserviceï¼›è€Œç»™rc2,3,4,5.dé‡Œæ·»åŠ äº†Så¼€å¤´çš„è„šæœ¬è½¯é“¾æ¥ï¼Œæ‰€ä»¥è¿›å…¥runlevel 2,3,4,5æ—¶ä¼šå¯åŠ¨è¿™ä¸ªserviceï¼Œè€Œ2æ­£æ˜¯é»˜è®¤çš„runlevelã€‚</p>
<p>ä½†æ˜¯ç­‰ä¸€ä¸‹ï¼Œå¦‚æœä»¥Kå’ŒSå¼€å¤´çš„è¿™äº›æ–‡ä»¶éƒ½æŒ‡å‘æˆ‘ä»¬çš„<code>hello_service</code>ï¼Œè€Œ<code>hello_service</code>é‡Œåˆåªæœ‰ä¸€è¡Œechoçš„å‘½ä»¤ï¼Œé‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆåŒºåˆ†æ‰§è¡Œstartè¿˜æ˜¯killï¼Ÿ</p>
<p>Debianæ‰‹å†Œé‡Œæåˆ°ï¼š'S' files invoke their program with the 'start' parameter, the 'K' files invoke their program with the 'stop' parameter.</p>
<p>æ‰€ä»¥ç³»ç»Ÿè¿›å…¥runlevel 2çš„æ—¶å€™ï¼Œç›¸å½“äºæ‰§è¡Œäº†<code>K20hello_service stop</code> å’Œ <code>S20hello_service start</code>ï¼Œä½†é—®é¢˜æ˜¯<code>hello_service</code>è¿™ä¸ªè„šæœ¬ç›®å‰å®Œå…¨ä¸æ¥å—å‚æ•°ï¼Œä¸è®ºæ˜¯ä¼ stopæˆ–è€…startï¼Œéƒ½ä¼šæ‰§è¡Œechoï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚</p>
<p>å¦‚ä½•å†™ä¸€ä¸ªç¬¦åˆè¿™å¥—æ ‡å‡†çš„serviceå¯åŠ¨è„šæœ¬ï¼Ÿ</p>
<h3 id="6-lsb-init-script">6. LSB Init Script</h3>
<p>Debianæ‰‹å†Œï¼šWrite the running script by following LSB (<a href="https://wiki.debian.org/LSBInitScripts">Linux Standard Base</a>) standard:</p>
<p>LSB-compliant init scripts need to:</p>
<ul>
<li>provide, at least, the following actions: <strong>start</strong>, <strong>stop</strong>, <strong>restart</strong>, <strong>force-reload</strong>, and <strong>status</strong>. All of those, except for status, are required by the Debian Policy</li>
<li>return proper exit status codes.</li>
<li>document runtime dependencies.</li>
</ul>
<p><strong>ç¬¬ä¸€ï¼šå“åº”5ä¸ªå‘½ä»¤</strong></p>
<p>è¦å“åº”start, stop, restart, force-reload, status5ä¸ªå‘½ä»¤ï¼Œå› ä¸ºè¿™ä¸ªhello_serviceå¹¶ä¸æ˜¯çœŸæ­£çš„ä¸€ç›´è·‘åœ¨bgçš„serviceï¼Œ<br>
å®ƒè¾“å‡ºä¸€è¡Œåå°±é€€å‡ºäº†ï¼Œæ‰€ä»¥å¤„ç†è¿™äº›å‘½ä»¤å…¶å®å¾ˆç®€å•ï¼š</p>
<pre><code class="language-bash">case &quot;$1&quot; in
    start)
        echo &quot;Hello from rc.d `whoami`, `date`&quot; &gt;&gt; /tmp/teststart
        ;;
    stop)
        echo &quot;stop hello_service&quot;
        ;;
    restart)
        echo &quot;Hello from rc.d `whoami`, `date`&quot; &gt;&gt; /tmp/teststart
        ;;
    force-reload)
        echo &quot;Hello from rc.d `whoami`, `date`&quot; &gt;&gt; /tmp/teststart
        ;;
    status)
        # å› ä¸ºè¾“å‡ºä¸€è¡Œå°±é€€å‡ºäº†ï¼Œæ‰€ä»¥query statusæ—¶åº”è¯¥æ˜¯ä¸€ç›´éƒ½æ²¡æœ‰running
        # é™¤éæ­£åœ¨echoçš„æ—¶å€™ï¼Œåˆšå¥½æ‰§è¡Œäº†query statusï¼Œä½†æ˜¯è¿™ä¸ªæ—¶é—´å¾ˆçŸ­ï¼Œæš‚ä¸è€ƒè™‘
        echo &quot;hello_service is not running&quot;
        exit 1
        ;;
    *)
        exit 2
        ;;
esac

exit 0
</code></pre>
<p><strong>ç¬¬äºŒï¼šæ°å½“çš„è¿”å›å€¼</strong></p>
<p>å¤„ç†ä¸¤ç§æƒ…å†µï¼š</p>
<ol>
<li>å½“ç¨‹åºæˆåŠŸè¿è¡Œï¼Œè¿”å›0ï¼Œæ¥æ”¶åˆ°äº†æœªçŸ¥çš„å‘½ä»¤ï¼Œè¿”å›é0ï¼Œè±¡ä¸Šé¢çš„ä¾‹å­exit 0å’Œexit 2ã€‚</li>
<li>Query statusæ—¶ï¼Œå¦‚æœserviceæ­£åœ¨è¿è¡Œï¼Œè¿”å›0ï¼Œå¦‚æœæ²¡æœ‰åœ¨è¿è¡Œï¼Œè¿”å›é0ï¼Œè±¡ä¸Šé¢çš„exit 1ï¼Œå…·ä½“è§ä¸‹é¢<code>--status-all</code>éƒ¨åˆ†çš„è§£é‡Šã€‚</li>
</ol>
<p>ä¸Šé¢çš„ä»£ç ç¬¦åˆè¿™ä¸¤ç‚¹è¦æ±‚ï¼Œæ‰€ä»¥ä¸éœ€è¦å¢åŠ ä»£ç ã€‚</p>
<p>hello_serviceåªæ˜¯åœ¨å¼€æœºæ—¶ç®€å•çš„echoä¸€è¡Œï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå¸¸é©»çš„serviceï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å¤„ç†è¿™5ä¸ªå‘½ä»¤å¾ˆç®€å•ã€‚å‡è®¾éœ€è¦å†™ä¸€ä¸ªå¸¸é©»çš„serviceï¼Œé‚£ä¹ˆåœ¨query statusæ—¶ï¼Œå¦‚ä½•è¿”å›æ­£ç¡®çš„statusç ï¼Ÿ</p>
<p>ç›®å‰åœ¨<code>/etc/init.d/</code>ä¸‹çš„serviceå¸¸ç”¨çš„åšæ³•å°±æ˜¯ï¼Œå½“ç¨‹åºstartæ—¶ï¼Œå°†ç¨‹åºçš„pidä¿å­˜åœ¨æŸä¸ªæ–‡ä»¶é‡Œï¼Œç„¶åå½“æ‰§è¡ŒstatusæŸ¥è¯¢æ—¶ï¼Œè¯»å–è¿™ä¸ªpidfileé‡Œçš„pidï¼Œç„¶åæŸ¥è¯¢æœ‰æ­¤pidçš„è¿›ç¨‹æ˜¯å¦å­˜åœ¨ã€‚å› ä¸ºè¿™ç§åšæ³•éå¸¸æ™®éï¼Œæ‰€ä»¥LSBæä¾›äº†è¿™äº›shell functionï¼Œåªè¦å¯¼å…¥è¿™äº›å‡½æ•°å°±å¯ä»¥ç›´æ¥ç”¨äº†ã€‚</p>
<p>ä¸‹é¢ä»¥æŸ¥è¯¢pptpdè¿›ç¨‹æ˜¯å¦åœ¨è¿è¡Œä¸ºä¾‹ï¼š</p>
<pre><code class="language-bash">#!/usr/bin/env bash

# å¯¼å…¥status_of_proc å‡½æ•°
. /lib/lsb/init-functions

# æ ¹æ®pidfileæŸ¥è¯¢æ­¤processçš„statusï¼Œå¦‚æœå­˜åœ¨è¿”å›0ï¼Œå¦åˆ™è¿”å›é0
status_of_proc -p /var/run/pptpd.pid &quot;/usr/sbin/pptpd&quot; &quot;pptpd&quot;

# æ‰“å°ç¨‹åºçš„è¿”å›å€¼ï¼Œå¦‚æœåœ¨è¿è¡Œï¼Œè¿”å›æ˜¯0ï¼Œå¦‚æœæ²¡æœ‰åœ¨è¿è¡Œï¼Œè¿™æ¬¡æµ‹è¯•è¿”å›çš„ç»“æœæ˜¯3
echo $?
</code></pre>
<p>(é¡ºä¾¿æä¸€ä¸‹<code>/etc/init.d/pptpd</code>æ–‡ä»¶é‡Œåšstatusæ“ä½œæ—¶ï¼Œå°‘äº†ä¸Šé¢çš„<code>-p</code>ï¼Œæ‰€ä»¥æŸ¥è¯¢è¿è¡ŒçŠ¶æ€ç»å¸¸æ˜¯not running)</p>
<p>å¦‚æœæŠŠ<code>status_of_proc</code>ç»“åˆè¿›ä¸Šé¢çš„è„šæœ¬ï¼Œå¤„ç†statuså‘½ä»¤æ—¶ï¼Œåº”è¯¥ç±»ä¼¼<code>/etc/init.d/apache2</code>çš„åšæ³•ï¼Œè°ƒç”¨<code>exit $?</code>ï¼š</p>
<pre><code class="language-bash">....
. /lib/lsb/init-functions

....
    status)
        status_of_proc -p $PIDFILE &quot;apache2&quot; &quot;$NAME&quot;
        exit $?
        ;;
....
</code></pre>
<p>å…³äºæ›´å¤šLSB init functionsï¼Œè¯·æŸ¥çœ‹<a href="http://refspecs.linuxbase.org/LSB_3.1.0/LSB-Core-generic/LSB-Core-generic/iniscrptfunc.html">init script functions</a></p>
<p><strong>ç¬¬ä¸‰ï¼šæ‰§è¡Œé¡ºåº åŠ ä¾èµ–æ‰§è¡Œ</strong></p>
<p>å› ä¸ºUbuntué»˜è®¤çš„runlevelæ˜¯2ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œè¿›å…¥level Sæ‰§è¡Œå®ŒrcS.dä¸‹çš„æœåŠ¡åï¼Œä¼štelinit 2ï¼Œè¿›å…¥runlevel 2ï¼Œæ‰§è¡Œrc2.dä¸‹çš„è„šæœ¬ï¼Œ<br>
æ­¤æ—¶rc2.dä¸‹çš„è„šæœ¬æœ‰ï¼š</p>
<pre><code class="language-bash">S20hello_service
S20pptpd
S20rsync
S20screen-cleanup
...
S91apache2
S99rc.local
...
</code></pre>
<p><strong>æ‰§è¡Œé¡ºåº</strong></p>
<p>The 'nn' is a two digit number from 01-99; lower number programs are executed first. By this method, services that have a dependancy can be certain their precursor has ran. The K and S signify simply Kill, or Start.</p>
<p>è¿™äº›è„šæœ¬çš„æ‰§è¡Œå¯åŠ¨é¡ºåºä¹Ÿæ˜¯æŒ‰ç…§å­—æ¯æ’åºæ¥æ‰§è¡Œçš„ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥çœ‹åˆ°apache2æ˜¯åœ¨hello_serviceåæ‰§è¡Œå¯åŠ¨çš„ã€‚<br>
<strong>åŒæ—¶ï¼Œè¯·æ³¨æ„è¿™é‡Œçš„S99rc.localï¼Œå®ƒæ˜¯æŒ‡å‘äº† <code>/etc/init.d/rc.local</code>ï¼Œè¢«åˆ†é…åˆ°äº†S99è¿™ä¸ªæ¯”è¾ƒå¤§çš„æ•°å­—ï¼Œ<br>
è¿™ä¹Ÿè§£é‡Šäº†å‰é¢çš„ï¼Œä¸ºä»€ä¹ˆrc.localä¼šåœ¨å…¶å®ƒæœåŠ¡æ‰§è¡Œåå†æ‰§è¡Œã€‚</strong></p>
<p><strong>ä¾èµ–æ‰§è¡Œ</strong></p>
<p>å›åˆ°ä¹‹å‰çš„é‚£ä¸ªé—®é¢˜ï¼Œå¦‚æœhello_serviceè¦åšçš„äº‹æ˜¯åœ¨apacheå¯åŠ¨åï¼Œç»Ÿè®¡å¯åŠ¨äº†å¤šå°‘è¿›ç¨‹ï¼Œé‚£ä¹ˆå°±æœ‰äº†ä¾èµ–æ‰§è¡Œçš„é—®é¢˜ï¼Œ<br>
è¦æ±‚hello_serviceåœ¨apache2 serviceæ‰§è¡Œåå†æ‰§è¡Œï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<p><strong>1)ï¼š</strong> ç”±äºè„šæœ¬æ‰§è¡Œé¡ºåºæ˜¯å­—æ¯åºï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡å‘½å<code>S20hello_service</code> æ”¹ä¸ºç±»ä¼¼<br>
<code>S92hello_service</code>ï¼Œè¿™æ ·çš„è¯ï¼Œå°±ä¼šå…ˆæ‰§è¡ŒS91çš„apache2ï¼Œå†æ‰§è¡ŒS92hello_serviceã€‚</p>
<pre><code class="language-bash">$ update-rc.d -f hello_service remove
# æŒ‡å®šæ‰§è¡Œé¡ºåºä¸º92
$ update-rc.d hello_service defaults 92
</code></pre>
<p>æ‰§è¡Œå®Œåå¯ä»¥çœ‹åˆ°hello_serviceè¢«å‘½åæˆäº†<code>S92hello_service</code>ï¼Œè¿™æ ·å°±æ’åœ¨äº†apache2çš„åé¢ã€‚</p>
<p><strong>2)ï¼š</strong> å¦ä¸€ç§æ–¹æ³•æ˜¯å‘Šè¯‰ç³»ç»Ÿè„šæœ¬çš„dependencyï¼Œè¿™ä¹Ÿæ˜¯LSB Init Scriptçš„ç¬¬ä¸‰ä¸ªè¦æ±‚ã€‚<br>
LSB Init Scriptæœ‰å›ºå®šçš„æ ¼å¼è¦æ±‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ¨¡æ¿ï¼š</p>
<pre><code class="language-bash">### BEGIN INIT INFO
# Provides:          scriptname
# Required-Start:    $remote_fs $syslog $time
# Required-Stop:     $remote_fs $syslog $time
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start daemon at boot time
# Description:       Enable service provided by daemon.
### END INIT INFO
</code></pre>
<p>å…¶ä¸­<code>Required-Start</code>å°±æ˜¯å¯åŠ¨ä¾èµ–é¡¹ï¼Œå¦‚æœæˆ‘ä»¬è¦ç»Ÿè®¡apacheå¯åŠ¨åï¼Œå¯åŠ¨äº†å¤šå°‘è¿›ç¨‹ï¼ŒæŠŠæˆ‘ä»¬çš„hello_serviceå†…å®¹æ”¹ä¸ºï¼š</p>
<pre><code class="language-bash">### BEGIN INIT INFO
# Provides:          hello_service
# Required-Start:    apache2
# Required-Stop:     apache2
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Stat apache2 process number at boot time
### END INIT INFO

case &quot;$1&quot; in
    start)
        echo &quot;`ps axu | grep apache | grep -v &quot;grep&quot; | wc -l` apache process started @ `date`&quot; &gt;&gt; /tmp/teststart
        ;;
    stop)
        echo &quot;stop hello_service&quot;
        ;;
    restart)
        echo &quot;`ps axu | grep apache | grep -v &quot;grep&quot; | wc -l` apache process started @ `date`&quot; &gt;&gt; /tmp/teststart
        ;;
    force-reload)
        echo &quot;`ps axu | grep apache | grep -v &quot;grep&quot; | wc -l` apache process started @ `date`&quot; &gt;&gt; /tmp/teststart
        ;;
    status)
        echo &quot;hello_service is not running&quot;
        exit 1
        ;;
    *)
        exit 2
        ;;
esac

exit 0
</code></pre>
<p>ä¿®æ”¹åä½¿ç”¨<code>insserv</code>æ¥æ·»åŠ hello_serviceçš„æœåŠ¡ï¼š</p>
<pre><code class="language-bash"># å¦‚æœæ²¡æœ‰insservçš„å‘½ä»¤ï¼Œè¯·å…ˆapt-get install insserv
# å¦‚æœæ˜¾ç¤ºå·²å®‰è£…insservï¼Œä½†æ˜¯è¿˜æ˜¯ä¸èƒ½åœ¨å‘½ä»¤è¡Œè°ƒç”¨ï¼Œä½¿ç”¨ï¼š
$ sudo ln -s /usr/lib/insserv/insserv /sbin/insserv
# æ·»åŠ hello_serviceï¼Œinsservä¼šé‡æ–°æ’åº
$ insserv hello_service
# æ­¤æ—¶å†ls
$ ls /etc/rc2.d/
S01dns-clean
S01pppd-dns
S02apache2
S03hello_service
...
S03sysstat
S04rc.local
...
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„å¯åŠ¨æ–‡ä»¶å·²ç»è¢«é‡æ–°æ’è¿‡åºäº†ï¼Œhello_serviceè¢«æ’åœ¨äº†apache2çš„åé¢ã€‚rc.localä»ç„¶è¢«æ”¾åœ¨æœ€åã€‚</p>
<h3 id="7-å…³äºservice-status-all">7. å…³äºservice --status-all</h3>
<p>å†™åˆ°è¿™é‡Œå·²ç»å®Œæˆäº†å¦‚ä½•å†™ä¸€ä¸ªè‡ªå·±çš„å¼€æœºå¯åŠ¨æœåŠ¡ï¼Œè¿™é‡Œé¡ºå¸¦æä¸€ä¸‹<code>service --status-all</code>ï¼Œåœ¨<a href="https://www.linode.com/docs/uptime/reboot-survival-guide">Linode: reboot survival guide</a> å’Œå…¶å®ƒstackoverflowçš„ä¸€äº›æé—®é‡Œï¼Œæåˆ°äº†è¿™ä¸ª<code>service --status-all</code>çš„å‘½ä»¤ï¼Œç”¨æ¥æŸ¥çœ‹å½“å‰è¿è¡Œçš„æœåŠ¡ï¼ŒåŸæ–‡ç±»ä¼¼ï¼š</p>
<p>&quot;&quot;&quot;Display which services are currently running, and which are listed to start on boot:</p>
<pre><code class="language-bash">sudo service --status-all
</code></pre>
<p>è¿è¡Œæ˜¾ç¤ºç»“æœç±»ä¼¼ï¼š</p>
<pre><code class="language-bash">$ service --status-all
 [ + ]  apache2
 [ + ]  atd
 [ ? ]  console-setup
 [ + ]  cron
 [ - ]  dbus
 [ ? ]  dns-clean
 [ + ]  friendly-recovery
 [ - ]  hello_service
 ....
</code></pre>
<p>Services preceded by a <code>[+]</code> are currently running, while those following a <code>[-]</code> are not, <code>[?]</code> means the services doesn't have a status command, so there's no way the service command can work out what's what.&quot;&quot;&quot;</p>
<p>ä½†æ˜¯è¯´æ˜¾ç¤º<code>[+]</code>è¡¨ç¤ºserviceæ­£åœ¨è¿è¡Œå…¶å®æ˜¯ä¸ç²¾ç¡®çš„ï¼Œ<code>service --status-all</code>çš„æ‰§è¡Œæ—¶ï¼Œ<br>
ä¼šå‘æ‰€æœ‰<code>/etc/init.d</code>ä¸‹çš„serviceå‘é€<code>status</code>çš„å‘½ä»¤ï¼Œä¾‹å¦‚<code>service apache2 status</code>ï¼Œ<br>
å¦‚æœæŸ¥çœ‹<code>/usr/bin/service</code>çš„æºç å°±ä¼šå‘ç°ï¼š</p>
<pre><code class="language-bash">out=$(env -i LANG=&quot;$LANG&quot; PATH=&quot;$PATH&quot; TERM=&quot;$TERM&quot; &quot;$SERVICEDIR/$SERVICE&quot; status 2&gt;&amp;1)
if [ &quot;$?&quot; = &quot;0&quot; -a -n &quot;$out&quot; ]; then
    #printf &quot; %s %-60s %s\n&quot; &quot;[+]&quot; &quot;$SERVICE:&quot; &quot;running&quot;
    echo &quot; [ + ]  $SERVICE&quot;
    continue
else
    echo &quot; [ - ]  $SERVICE&quot;
    continue
fi
</code></pre>
<p>å¦‚æœ<code>status</code>çš„è¿”å›å€¼æ˜¯0ï¼Œå°±æ˜¾ç¤ºåŠ å·ï¼Œå¦åˆ™å°±æ˜¾ç¤ºå‡å·ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸Šé¢LSB Init Scriptæ ‡å‡†é‡Œçš„ç¬¬äºŒæ¡è¦æ±‚ï¼š<br>
å¿…é¡»è¿”å›æ°å½“çš„status codeã€‚è€Œè¿™ä¹Ÿè¡¨æ˜ï¼Œæ˜¯å¦æ˜¾ç¤ºåŠ å·å–å†³äºå…·ä½“åº”ç”¨/Serviceçš„è¿™ä¸ªå¯åŠ¨è„šæœ¬æ€ä¹ˆå†™ï¼Œæ˜¯å¦ç¬¦åˆè¿™ç¬¬äºŒæ¡è¦æ±‚ã€‚</p>
<p>æ¯”å¦‚<code>/etc/init.d/apache2</code>çš„è„šæœ¬é‡Œï¼š</p>
<pre><code class="language-bash">status)
      status_of_proc -p $PIDFILE &quot;apache2&quot; &quot;$NAME&quot;
      exit $?
</code></pre>
<p>è°ƒç”¨äº†<code>status_of_proc</code>ï¼Œå¹¶å°†è¿™æ¡å‘½ä»¤çš„è¿”å›å€¼è¿”å›ï¼Œ($? is used to find the return value of the last executed command)ï¼Œå¦‚æœapacheåœ¨è¿è¡Œï¼Œé‚£ä¹ˆstatus_of_procè¿”å›çš„å°±æ˜¯0ï¼Œå°±ä¼šæ‰§è¡Œä¸‹ä¸€è¡Œçš„exit 0ï¼Œè¿›è€Œåœ¨<code>--status-all</code>æ—¶æ˜¾ç¤ºçš„å°±æ˜¯åŠ å·ï¼Œ<br>
è¿™ä¹Ÿè¯´æ˜apacheçš„è„šæœ¬åœ¨statusä¸‹è¿”å›äº†proper exit codeã€‚</p>
<p>å†çœ‹redisç”Ÿæˆçš„è„šæœ¬ï¼Œredisé»˜è®¤è·‘åœ¨6379çš„ç«¯å£ä¸‹ï¼ŒUbuntu apt-get å®‰è£…redisæ—¶ç³»ç»Ÿä¼šç”Ÿæˆä¸€ä¸ªredis_6379çš„æ–‡ä»¶ï¼ŒæŸ¥çœ‹å®ƒå¤„ç†statusçš„ä»£ç ï¼š</p>
<pre><code class="language-bash">status)
    if [ ! -f $PIDFILE ]
    then
        echo 'Redis is not running'
    else
        echo &quot;Redis is running&quot;
    fi
    ;;
</code></pre>
<p>å¯ä»¥çœ‹åˆ°å¦‚æœredisæ²¡æœ‰åœ¨è¿è¡Œï¼Œé‚£ä¹ˆä¼šæ˜¾ç¤ºnot runningï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ¥ä¸‹æ¥è°ƒç”¨exit 1æ¥è¿”å›é0çš„exit codeï¼Œ<br>
ä¹Ÿå°±æ˜¯å¹¶æ²¡æœ‰ä¸¥æ ¼æŒ‰ç…§LSB Init Scriptçš„æ ‡å‡†æ¥å†™ï¼Œè¿™æ ·æœ€åç¨‹åºè¿”å›çš„è¿˜æ˜¯0ã€‚å¦‚æœredisæœ¬èº«å¹¶æ²¡æœ‰è¿è¡Œï¼Œ<br>
å½“ç”¨<code>service redis_6379 status</code>æ—¶ä¼šæ‰“å‡º&quot;not running&quot;ï¼Œ<br>
ä½†æ˜¯å½“ç”¨<code>service --status-all</code>æŸ¥çœ‹æ—¶ï¼Œä¼šå‘ç°å®ƒå‰é¢å´æ˜¯æ˜¾ç¤ºæœ‰åŠ å·çš„ã€‚</p>
<p>Fixå®ƒä¹Ÿå¾ˆç®€å•ï¼Œåªè¦åœ¨not runningé‚£è¡ŒååŠ ä¸Šexit 1å°±å¥½ï¼š</p>
<pre><code class="language-bash">    ....
    if [ ! -f $PIDFILE ]
    then
        echo 'Redis is not running'
        exit 1
    ....
</code></pre>
<p>æ€»è€Œè¨€ä¹‹ï¼Œä½¿ç”¨<code>service --status-all</code>æ—¶è¿”å›çš„åŠ å·å’Œå‡å·å¹¶ä¸èƒ½ç²¾ç¡®çš„ååº”serviceçš„è¿è¡ŒçŠ¶æ€ï¼Œåªæœ‰å½“serviceçš„å¯åŠ¨è„šæœ¬ä¸¥æ ¼æŒ‰ç…§LSB Init Scriptæ ‡å‡†æ¥å†™æ—¶æ‰æ˜¯å‡†ç¡®çš„ã€‚</p>
<h3 id="8-å°ç»“">8. å°ç»“</h3>
<p>æƒ³è¦å¼€æœºå¯åŠ¨æ—¶å¯åŠ¨è‡ªå·±çš„æœåŠ¡ï¼š</p>
<ul>
<li>å¦‚æœæ‰§è¡Œå¾ˆç®€å•ï¼Œåªæ˜¯ä¸€ä¸¤è¡Œä»£ç çš„äº‹ï¼Œé‚£ä¹ˆåˆ«æŠ˜è…¾äº†ï¼Œç›´æ¥æ‰”è¿›<code>/etc/rc.local</code>å°±å¥½ï¼›</li>
<li>å¦‚æœæ˜¯ä¸ªç³»ç»Ÿçº§çš„æœåŠ¡ï¼Œä¸ä»…æƒ³å¼€æœºæ‰§è¡Œï¼Œè€Œä¸”æƒ³æä¾›ç±»ä¼¼ <code>service my_service [start|stop|restart|status]</code><br>
ç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œé‚£ä¹ˆå¯ä»¥å†™ä¸€ä¸ªå¯åŠ¨è„šæœ¬ï¼Œæ”¾å…¥<code>/etc/init.d/</code>ä¸‹ï¼Œç¡®ä¿å®ƒç¬¦åˆLSB Init Scriptçš„ä¸‰ä¸ªæ ‡å‡†ï¼Œæœ€åç”¨<code>update-rc.d</code><br>
æˆ–è€…<code>insserv</code>ç»™ä¸€ä¸ªæ‰§è¡Œä¼˜å…ˆçº§å³å¯ã€‚</li>
</ul>
<h3 id="reference">Reference:</h3>
<ol>
<li><a href="https://www.linode.com/docs/uptime/reboot-survival-guide">Linode: reboot survival guide</a></li>
<li><a href="http://unix.stackexchange.com/questions/49626/purpose-and-typical-usage-of-etc-rc-local">Stackoverflow: rc.local</a></li>
<li><a href="http://askubuntu.com/questions/446950/what-is-in-service-status-all">Question mark in service --status-all</a></li>
<li><a href="http://manpages.ubuntu.com/manpages/lucid/man7/runlevel.7.html">Ubuntu man page: runlevel</a></li>
<li><a href="https://www.debian-administration.org/article/212/An_introduction_to_run-levels">Debian: an intro to runlevels</a></li>
<li><a href="https://www.debian-administration.org/article/28/Making_scripts_run_at_boot_time_with_Debian">Debian: making scripts run at boot time with Debian</a></li>
<li><a href="https://help.ubuntu.com/community/UpstartHowto">Ubuntu: upstart howto</a></li>
<li><a href="https://wiki.debian.org/LSBInitScripts">Debian wiki: LSBInitScripts</a></li>
</ol>

            </div>
          </article>
        </div>
        <div class="paper" data-aos="fade-in">
          
            <div class="next-post">
              <div class="next">
                ä¸‹ä¸€ç¯‡
              </div>
              <a href="https://bofeng.github.io/post/note-on-cpython-interpreter-source-code/">
                <h3 class="post-title">
                  Note on CPython Interpreter source code
                </h3>
              </a>
            </div>
          
        </div>
        
      </div>

      <div class="sm-12 md-4 col sidebar">
  <div class="paper info-container">
    <img src="https://bofeng.github.io/images/avatar.png?v=1587246450810" class="no-responsive avatar">
    <div class="text-muted"></div>
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      æœ€æ–°æ–‡ç« 
    </div>
    <div class="row">
      <ul>
        
          
            <li>
              <a href="https://bofeng.github.io/post/why-there-is-no-gets-function-in-c-standard-library/">Why there is no &#34;gets&#34; function in C standard library?</a>
            </li>
          
        
          
            <li>
              <a href="https://bofeng.github.io/post/gnome-display-settings-enable-multiple-scales/">Gnome display settings enable multiple scales</a>
            </li>
          
        
          
            <li>
              <a href="https://bofeng.github.io/post/array-and-pointer-in-c/">Array and Pointer in C</a>
            </li>
          
        
          
            <li>
              <a href="https://bofeng.github.io/post/initialize-c-structure/">Initialize C Structure</a>
            </li>
          
        
          
            <li>
              <a href="https://bofeng.github.io/post/back-pressure/">Back Pressure</a>
            </li>
          
        
          
            <li>
              <a href="https://bofeng.github.io/post/threadinglocal-and-contextvarscontextvar/">threading.local and contextvars.ContextVar</a>
            </li>
          
        
          
            <li>
              <a href="https://bofeng.github.io/post/starlette-quick-manual/">ğŸŒŸ Starlette Quick Manual</a>
            </li>
          
        
          
            <li>
              <a href="https://bofeng.github.io/post/deploy-poll-app-to-rocketchat/">ğŸš€ Deploy Poll App to Rocket.chat</a>
            </li>
          
        
          
            <li>
              <a href="https://bofeng.github.io/post/proxy-websocket-timeout/">ğŸš Proxy Websocket Timeout </a>
            </li>
          
        
          
            <li>
              <a href="https://bofeng.github.io/post/proxy-websocket-configuration-in-apache-and-nginx/">Proxy Websocket Configuration in Apache and Nginx</a>
            </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      æ ‡ç­¾åˆ—è¡¨
    </div>
    <div class="row">
      
        <a href="https://bofeng.github.io/tag/6jBa1--fpS/" class="badge ">
          linux
        </a>
      
        <a href="https://bofeng.github.io/tag/Jo5ZHkrbX/" class="badge warning">
          ubuntu
        </a>
      
        <a href="https://bofeng.github.io/tag/Xp4pUvOV9/" class="badge warning">
          c
        </a>
      
        <a href="https://bofeng.github.io/tag/MIOrvhB7a/" class="badge secondary">
          rocketchat
        </a>
      
        <a href="https://bofeng.github.io/tag/B-lE5rjJQ/" class="badge secondary">
          websocket
        </a>
      
        <a href="https://bofeng.github.io/tag/4mqNg88O5/" class="badge success">
          nginx
        </a>
      
        <a href="https://bofeng.github.io/tag/ldB2Nthcy/" class="badge ">
          apache
        </a>
      
        <a href="https://bofeng.github.io/tag/jmsnxeb0L/" class="badge success">
          webpy
        </a>
      
        <a href="https://bofeng.github.io/tag/dTSYjKA1x/" class="badge success">
          passwd
        </a>
      
        <a href="https://bofeng.github.io/tag/4NRPVT4nt/" class="badge secondary">
          godaddy
        </a>
      
        <a href="https://bofeng.github.io/tag/Dr03KtaXl/" class="badge secondary">
          raspi
        </a>
      
        <a href="https://bofeng.github.io/tag/DfdCdjQwH/" class="badge ">
          vnc
        </a>
      
        <a href="https://bofeng.github.io/tag/GLhh3mgC0/" class="badge warning">
          logroute
        </a>
      
        <a href="https://bofeng.github.io/tag/Y-U7pc_rs/" class="badge secondary">
          uwsgi
        </a>
      
        <a href="https://bofeng.github.io/tag/2ldRfwlTHj/" class="badge ">
          ngrok
        </a>
      
        <a href="https://bofeng.github.io/tag/N7uzveFEQ/" class="badge success">
          flask
        </a>
      
        <a href="https://bofeng.github.io/tag/t46GgOmQJ/" class="badge secondary">
          classmethod
        </a>
      
        <a href="https://bofeng.github.io/tag/7tN2CvtD1N/" class="badge secondary">
          staticmethod
        </a>
      
        <a href="https://bofeng.github.io/tag/eSZ5lHy7P/" class="badge ">
          python
        </a>
      
        <a href="https://bofeng.github.io/tag/8bPDgHSAN/" class="badge secondary">
          web
        </a>
      
        <a href="https://bofeng.github.io/tag/vJnENzWsf/" class="badge success">
          ssl
        </a>
      
        <a href="https://bofeng.github.io/tag/dnoL5D0w-/" class="badge secondary">
          mail
        </a>
      
        <a href="https://bofeng.github.io/tag/yuo6OYefk4/" class="badge secondary">
          smtp
        </a>
      
        <a href="https://bofeng.github.io/tag/GS8sncYwZ/" class="badge success">
          rsync
        </a>
      
        <a href="https://bofeng.github.io/tag/EXump4cPm/" class="badge warning">
          pypi
        </a>
      
        <a href="https://bofeng.github.io/tag/LzDugb5gQm/" class="badge secondary">
          cors
        </a>
      
        <a href="https://bofeng.github.io/tag/rLcaXQkmK/" class="badge warning">
          vim
        </a>
      
        <a href="https://bofeng.github.io/tag/vLxhso05B/" class="badge secondary">
          strace
        </a>
      
        <a href="https://bofeng.github.io/tag/IbPl9to7C/" class="badge warning">
          google
        </a>
      
        <a href="https://bofeng.github.io/tag/X_VKuDyUs/" class="badge secondary">
          opensource
        </a>
      
        <a href="https://bofeng.github.io/tag/JPaKbEpxsK/" class="badge secondary">
          license
        </a>
      
        <a href="https://bofeng.github.io/tag/0uGMCxZDs/" class="badge success">
          mkdocs
        </a>
      
        <a href="https://bofeng.github.io/tag/K5ngz4Z3X/" class="badge warning">
          cloudflare
        </a>
      
        <a href="https://bofeng.github.io/tag/XlycwU8qXZ/" class="badge success">
          github
        </a>
      
        <a href="https://bofeng.github.io/tag/OLHLFT4if/" class="badge success">
          ssh
        </a>
      
        <a href="https://bofeng.github.io/tag/AWO0Br2y4/" class="badge secondary">
          scratch
        </a>
      
        <a href="https://bofeng.github.io/tag/O0PlhyDUc/" class="badge secondary">
          algorithm
        </a>
      
        <a href="https://bofeng.github.io/tag/O0zRGJ6aD/" class="badge ">
          jQuery
        </a>
      
        <a href="https://bofeng.github.io/tag/3NETfISBbQ/" class="badge secondary">
          js
        </a>
      
        <a href="https://bofeng.github.io/tag/4zLHN4PXY/" class="badge warning">
          docker
        </a>
      
        <a href="https://bofeng.github.io/tag/ROXx9algt/" class="badge warning">
          opencourse
        </a>
      
        <a href="https://bofeng.github.io/tag/1KJQkim0xD/" class="badge warning">
          course
        </a>
      
        <a href="https://bofeng.github.io/tag/-Mmbm4s8hZ/" class="badge warning">
          education
        </a>
      
        <a href="https://bofeng.github.io/tag/QibBEdubUA/" class="badge secondary">
          chromebook
        </a>
      
        <a href="https://bofeng.github.io/tag/rMdHe7zYUx/" class="badge ">
          iOS
        </a>
      
        <a href="https://bofeng.github.io/tag/w0rUetnyT/" class="badge warning">
          life
        </a>
      
        <a href="https://bofeng.github.io/tag/ypaP9jx_V/" class="badge secondary">
          hls
        </a>
      
        <a href="https://bofeng.github.io/tag/ITnA4khP_/" class="badge ">
          protobuf
        </a>
      
        <a href="https://bofeng.github.io/tag/5XAvbVu7Y/" class="badge secondary">
          loadbalance
        </a>
      
        <a href="https://bofeng.github.io/tag/G6EOG9dUqx/" class="badge success">
          server
        </a>
      
        <a href="https://bofeng.github.io/tag/v-BqS_DjJ/" class="badge success">
          iPhone
        </a>
      
        <a href="https://bofeng.github.io/tag/I7SG4keW3/" class="badge warning">
          objc
        </a>
      
        <a href="https://bofeng.github.io/tag/g_FfQMIOg/" class="badge secondary">
          memcached
        </a>
      
        <a href="https://bofeng.github.io/tag/eAw-5Salr/" class="badge secondary">
          datamining
        </a>
      
    </div>
  </div>
  <div class="paper">
    
  </div>
</div>


    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

</script>




  </body>
</html>
